/* 
 * English Fields CSS - For fields that should display and accept English input only
 * This file ensures specific fields use RTL direction and Latin/English fonts
 * Applied to: usernames, emails, passwords, license plates, fleet numbers, technical codes, etc.
 * Font: Roboto (loaded via Google Fonts in base templates)
 * Numerals: Forces Western numerals (0123456789) instead of Arabic numerals (٠١٢٣٤٥٦٧٨٩)
 * 
 * IMPORTANT: This file must load AFTER base/_fonts.css to override the global Arabic font
 * Maximum specificity is used to override !important rules from global font CSS
 */

/* =============================================================================
   USERNAME FIELDS - Force English/RTL
   ============================================================================= */
/* Maximum specificity to override global Arabic font */
body input[name="username"],
body input[id*="username"],
body input[id*="id_username"],
body .form-control[name="username"],
body .form-control[id*="username"],
body .info-value.readonly:has(~ .info-label:contains("اسم المستخدم")),
body div:has(> .info-label:contains("اسم المستخدم")) .info-value {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* Username display in account profile */
body .info-row:has(.info-label:contains("اسم المستخدم")) .info-value {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
}

/* Generic display elements that should stay in English/Western numerals */
body .english-display,
body .english-text,
body .ltr-display,
body *:not([class*="bi"]):not([class*="icon"]).english-display,
body *:not([class*="bi"]):not([class*="icon"]).english-text,
body *:not([class*="bi"]):not([class*="icon"]).ltr-display,
body .info-value .english-display,
body .info-value .english-text,
body .info-value .ltr-display {
    /* NOTE: This rule deliberately mirrors the specificity of base/_fonts.css.
       Apply the `english-display` (or `english-text` / `ltr-display`) class to any
       element that must stay in Latin characters (username/email/etc) so it wins
       against the global Arabic font + digit shaping and forces Western numerals. */
    direction: ltr !important;
    text-align: left !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: isolate !important;
    font-variant-numeric: lining-nums tabular-nums !important;
    -webkit-font-feature-settings: "lnum" 1, "tnum" 1 !important;
    font-feature-settings: "lnum" 1, "tnum" 1 !important;
    font-style: normal !important;
    font-weight: 400 !important;
    display: inline-block !important;
}

/* =============================================================================
   EMAIL FIELDS - Force English/RTL
   ============================================================================= */
body input[type="email"],
body input[name="email"],
body input[id*="email"],
body input[id*="id_email"],
body .form-control[type="email"],
body .form-control[name="email"],
body .info-row:has(.info-label:contains("البريد الإلكتروني")) .info-value {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   PASSWORD FIELDS - Force English/RTL
   ============================================================================= */
body input[type="password"],
body input[name*="password"],
body input[id*="password"],
body .form-control[type="password"],
body .password-input-wrapper input,
body .password-input-wrapper .form-control {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', "Courier New", monospace, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    letter-spacing: 0.5px;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   LICENSE PLATE FIELDS (ENGLISH) - Force English/RTL
   ============================================================================= */
body input[name="plate_no_en"],
body input[id*="plate_no_en"],
body input[id*="id_plate_no_en"],
body .form-control[name="plate_no_en"],
body .form-control[id*="plate_no_en"],
body th[data-sort="plate_no_en"],
/* English license plate values in detail views and other places */
/* Maximum specificity to override global Arabic font from _fonts.css */
body .plate-no-en-value,
body .detail-value.plate-no-en-value,
body span.plate-no-en-value,
body p .plate-no-en-value,
body .alert .plate-no-en-value,
body .card .plate-no-en-value,
body .card-body .plate-no-en-value,
body .detail-row .plate-no-en-value,
body .detail-card .plate-no-en-value,
body .detail-card-body .plate-no-en-value {
    direction: rtl !important;
    text-align: right !important;
    /* Force Roboto font - must come first in font-family to override Arabic font */
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
    /* Force English numerals (0123456789) instead of Arabic numerals (٠١٢٣٤٥٦٧٨٩) */
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" 1 !important;
    font-feature-settings: "lnum" 1 !important;
    -moz-font-feature-settings: "lnum" 1 !important;
    font-style: normal !important;
    font-weight: 400 !important;
    display: inline-block !important;
}

/* License plate in tables */
body td[data-field="plate_no_en"],
body table td:nth-child(2) {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
}

/* =============================================================================
   FLEET NUMBER FIELDS - Force English/RTL
   ============================================================================= */
body input[name="fleet_no"],
body input[id*="fleet_no"],
body input[id*="id_fleet_no"],
body .form-control[name="fleet_no"],
body .form-control[id*="fleet_no"],
/* Fleet number values in detail views and other places */
/* Maximum specificity to override global Arabic font from _fonts.css */
body .fleet-no-value,
body .detail-value.fleet-no-value,
body span.fleet-no-value,
body p .fleet-no-value,
body .alert .fleet-no-value,
body .card .fleet-no-value,
body .card-body .fleet-no-value,
body .detail-row .fleet-no-value,
body .detail-card .fleet-no-value,
body .detail-card-body .fleet-no-value {
    direction: rtl !important;
    text-align: right !important;
    /* Force Roboto font - must come first in font-family to override Arabic font */
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    /* Force English numerals (0123456789) instead of Arabic numerals (٠١٢٣٤٥٦٧٨٩) */
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" 1 !important;
    font-feature-settings: "lnum" 1 !important;
    -moz-font-feature-settings: "lnum" 1 !important;
    font-style: normal !important;
    font-weight: 400 !important;
    display: inline-block !important;
}

/* Fleet number in tables - first column in car list table */
body table#carTable tbody tr td:first-child,
body table.table-hover tbody tr td:first-child,
body td[data-field="fleet_no"] {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* =============================================================================
   PHONE NUMBER FIELDS - Force English/RTL
   ============================================================================= */
body input[type="tel"],
body input[name*="phone"],
body input[id*="phone"],
body input[name*="mobile"],
body input[id*="mobile"],
body .form-control[type="tel"],
body .form-control[name*="phone"] {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   URL FIELDS - Force English/RTL
   ============================================================================= */
body input[type="url"],
body input[name*="url"],
body input[id*="url"],
body input[name*="website"],
body input[id*="website"],
body .form-control[type="url"] {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', "Courier New", monospace, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   TECHNICAL CODE/ID FIELDS - Force English/RTL
   ============================================================================= */
body input[name*="code"],
body input[id*="code"],
body input[name*="_id"],
body input[id*="_id"],
body input[name*="serial"],
body input[id*="serial"],
body input[name*="vin"],
body input[id*="vin"],
body .form-control[name*="code"],
body .form-control[name*="serial"],
body .form-control[name*="vin"] {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', "Courier New", monospace, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    text-transform: uppercase;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   NUMBER/NUMERIC FIELDS - Ensure proper display
   ============================================================================= */
body input[type="number"],
body input[inputmode="numeric"],
body .form-control[type="number"] {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   SPECIAL CLASSES FOR MANUAL APPLICATION
   ============================================================================= */
body input.english-field,
body .form-control.english-field,
body input.ltr-field,
body .form-control.ltr-field,
body input.latin-text,
body .form-control.latin-text,
body input.english-only,
body .form-control.english-only {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

body input.english-code,
body .form-control.english-code,
body input.technical-code,
body .form-control.technical-code {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', "Courier New", monospace, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   PLACEHOLDER TEXT - English fields should have visible placeholders
   ============================================================================= */
body input.english-field::placeholder,
body .form-control.english-field::placeholder,
body input.ltr-field::placeholder,
body input[type="email"]::placeholder,
body input[type="password"]::placeholder,
body input[name="username"]::placeholder,
body input[name="plate_no_en"]::placeholder,
body input[name="fleet_no"]::placeholder {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
}

/* =============================================================================
   FORCE RTL OVERRIDE - Ensure these fields use RTL
   ============================================================================= */
body[dir="rtl"] input[type="email"],
body[dir="rtl"] input[type="password"],
body[dir="rtl"] input[name="username"],
body[dir="rtl"] input[name="plate_no_en"],
body[dir="rtl"] input[name="fleet_no"],
body[dir="rtl"] input[type="url"],
body[dir="rtl"] .form-control.english-field {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
}

/* =============================================================================
   TABLE CELLS - Specific columns that should display in English
   ============================================================================= */
/* For car list table - plate_no_en column (assuming it's the 2nd or 3rd column) */
body .table-hover tbody tr td:nth-child(2),
body .table-hover tbody tr td:nth-child(3) {
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
}

/* Generic table cells with English data */
body table td[data-type="english"],
body table td[data-type="code"],
body table td[data-type="technical"] {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
}

/* =============================================================================
   RESPONSIVE - Maintain RTL on mobile
   ============================================================================= */
@media (max-width: 768px) {
    body input.english-field,
    body .form-control.english-field,
    body input.ltr-field,
    body input[type="email"],
    body input[type="password"],
    body input[name="username"],
    body input[name="plate_no_en"],
    body input[name="fleet_no"] {
        direction: rtl !important;
        text-align: right !important;
        font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    }
}

/* =============================================================================
   PRINT STYLES - Maintain English display in print
   ============================================================================= */
@media print {
    body input.english-field,
    body .form-control.english-field,
    body input.ltr-field,
    body input.latin-text,
    body input[type="email"],
    body input[type="password"],
    body input[name="username"],
    body input[name="plate_no_en"],
    body input[name="fleet_no"] {
        direction: rtl !important;
        text-align: right !important;
        font-family: 'Roboto', 'Roboto', 'Roboto', Arial, sans-serif !important;
        font-variant-numeric: lining-nums !important;
        -webkit-font-feature-settings: "lnum" !important;
        font-feature-settings: "lnum" !important;
    }
}

/* =============================================================================
   CRISPY FORMS COMPATIBILITY
   ============================================================================= */
body .crispy-forms-container input[type="email"],
body .crispy-forms-container input[type="password"],
body .crispy-forms-container input[name="username"],
body div[id*="div_id_username"] input,
body div[id*="div_id_email"] input,
body div[id*="div_id_password"] input,
body div[id*="div_id_plate_no_en"] input,
body div[id*="div_id_fleet_no"] input {
    direction: rtl !important;
    text-align: right !important;
    font-family: 'Roboto', 'Roboto', 'Roboto', -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", Arial, sans-serif !important;
    unicode-bidi: plaintext !important;
    font-variant-numeric: lining-nums !important;
    -webkit-font-feature-settings: "lnum" !important;
    font-feature-settings: "lnum" !important;
    font-style: normal !important;
    font-weight: 400 !important;
}

/* =============================================================================
   PASSWORD TOGGLE ICON POSITIONING - Account for RTL text
   ============================================================================= */
.password-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
}

/* Password fields in RTL context - icon on right, proper padding */
.password-input-wrapper input[type="password"],
.password-input-wrapper input[name*="password"],
.password-input-wrapper .form-control[type="password"] {
    padding-right: 45px !important;
    padding-left: 15px !important;
    direction: rtl !important;
    text-align: right !important;
}

/* Override template styles for password toggle icon - position on right, vertically centered */
.password-input-wrapper .password-toggle-icon,
.password-input-wrapper span.password-toggle-icon {
    position: absolute !important;
    right: 15px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    margin: 0 !important;
    cursor: pointer;
    color: #6c757d;
    font-size: 1.2rem;
    display: flex !important;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    transition: color 0.3s ease;
    z-index: 10;
    pointer-events: auto;
    line-height: 1;
}

.password-input-wrapper .password-toggle-icon:hover {
    color: #003366;
}

/* Ensure icon doesn't interfere with text input */
.password-input-wrapper .password-toggle-icon i {
    pointer-events: none;
    display: block;
    line-height: 1;
}

/* RTL context - keep icon on right for RTL password fields */
[dir="rtl"] .password-input-wrapper .password-toggle-icon,
[dir="rtl"] .password-input-wrapper span.password-toggle-icon {
    right: 15px !important;
    left: auto !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
}

